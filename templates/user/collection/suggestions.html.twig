
{% extends "@user/list_items.html.twig" %}

{% block spreadsheets %}
	{{ parent() }}
    <link rel="stylesheet" href="{{ asset("css/examTable.css")}}" />

    <style>
        .sugg-accepted {
            font-weight: bold;
            color:green;
        }

        .sugg-rejected {
            font-weight: bold;
            color:#ff5a5a;
        }
    </style>
{% endblock %}

{% block breadcrumb %}
    {{ parent() }}
	<li class="uk-disabled uk-disabled-color"><a>Suggestions</a></li>
{% endblock %}

{% block page %}
<nav class="uk-navbar-nocolor uk-navbar-container">
    <div class="uk-container uk-navbar-transparent">
        <div data-uk-navbar>

            <a class="uk-navbar-toggle uk-hidden@m" href="#offcanvas" data-uk-toggle><span
            data-uk-navbar-toggle-icon></span> <span class="uk-margin-small-left">Menu</span></a>
            <ul class="uk-navbar-nav uk-visible@m">
                <li><a href="{{ path("user_certifs")}}">Certifications</a></li>
                <li><a href="{{ path("user_favs")}}">Favourites</a></li>
                <li class = "uk-disabled-whiter-color uk-disabled"><a>Suggestions</a></li>
            </ul>
        </div>
    </div>
</nav>

<hr class = "uk-hr uk-margin-horizontal-none" style = "border-color: #b1b1b1;">

<h5 style = "margin-bottom: 10px;"><b>Here's all of your suggestions:</b></h5>

<div style = "padding: 0px 15px 20px;">
    <i> All approved and rejected suggestions will be deleted from the database after 3 days from their review date.</i>
</div>

<div style = "padding: 10px 20px;">
    <div class="uk-width-1-1">
        <table class="uk-table uk-table-hover uk-table-striped dataTable uk-full-width">
            <thead>
                <tr>
                    <th>Created At</th>
                    <th>Exam Provider</th>
                    <th>Exam Code</th>
                    <th>Exam Title</th>
                    <th>Questions</th>
                    <th>Time</th>
                    <th>Status</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                {% for sugg in app.user.suggestions %}
                    <tr>
                        <td>{{ sugg.getCreatedAt()|date('Y-m-d H:i:s') }}</td>
                        <td>{{ sugg.eProvider }}</td>
                        <td>{{ sugg.examCode }}</td>
                        <td>{{ sugg.examTitle }}</td>
                        <td>{{ sugg.questionsCount }}</td>
                        <td>{{ sugg.minsUntil }}</td>
                        {% if sugg.status != null %}
                            <td>
                             {% if  sugg.rejectionReason == null %}
                                 <span class = 'sugg-accepted'>
                             {% else %}
                                <span class = 'sugg-rejected'>
                             {% endif %}

                             {{sugg.status}}
                             </span>
                             </td>
                            <td>
                                <a class = "uk-button uk-button-default uk-full-width" onclick="alert('Reviewed at: {{ sugg.getDecidedAt()|date('Y-m-d H:i:s') }}{{ ("\\nReason for rejection: "~ sugg.rejectionReason)|default("")}}')">INFO</a>
                            </td>
                        {% else %}
                            <td>-</td>
                            <td>
                                <a class = "uk-button uk-button-default uk-full-width" href="{{ path('user_sugg_edit', {'id': sugg.id}) }}">Edit</a>
                            </td>
                        {% endif %}
                    </tr>
                {% else %}
                    <tr>
                        <td colspan="8" class = "uk-no-records-found">no records found</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock page %}